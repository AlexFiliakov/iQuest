/home/alexf/claude-env/lib/python3.12/site-packages/pytest_asyncio/plugin.py:208: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.5, pluggy-1.6.0 -- /home/alexf/claude-env/bin/python3
cachedir: .pytest_cache
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
hypothesis profile 'default'
Matplotlib: 3.10.3
Freetype: 2.6.1
PyQt6 6.9.0 -- Qt runtime 6.9.0 -- Qt compiled 6.9.0
metadata: {'Python': '3.12.3', 'Platform': 'Linux-5.15.167.4-microsoft-standard-WSL2-x86_64-with-glibc2.39', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'benchmark': '5.1.0', 'hypothesis': '6.131.28', 'rerunfailures': '15.1', 'anyio': '4.9.0', 'mock': '3.14.0', 'mpl': '0.17.0', 'qt': '4.4.0', 'xdist': '3.7.0', 'Faker': '37.3.0', 'timeout': '2.4.0', 'cov': '6.1.1', 'asyncio': '1.0.0', 'html': '4.1.1', 'metadata': '3.1.1'}}
rootdir: /mnt/c/Users/alexf/OneDrive/Documents/Projects/Apple Health Exports
configfile: pytest.ini
plugins: benchmark-5.1.0, hypothesis-6.131.28, rerunfailures-15.1, anyio-4.9.0, mock-3.14.0, mpl-0.17.0, qt-4.4.0, xdist-3.7.0, Faker-37.3.0, timeout-2.4.0, cov-6.1.1, asyncio-1.0.0, html-4.1.1, metadata-3.1.1
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 819 items

tests/unit/test_accessibility_compliance.py::TestVisualizationAccessibilityManager::test_initialization PASSED [  0%]
tests/unit/test_accessibility_compliance.py::TestVisualizationAccessibilityManager::test_make_chart_accessible FAILED [  0%]

=================================== FAILURES ===================================
_______ TestVisualizationAccessibilityManager.test_make_chart_accessible _______
tests/unit/test_accessibility_compliance.py:84: in test_make_chart_accessible
    accessible_chart = accessibility_manager.make_chart_accessible(
src/ui/accessibility/accessibility_manager.py:94: in make_chart_accessible
    self._enhance_chart_accessibility(accessible_chart)
src/ui/accessibility/accessibility_manager.py:145: in _enhance_chart_accessibility
    self._ensure_color_accessibility(chart)
src/ui/accessibility/accessibility_manager.py:213: in _ensure_color_accessibility
    issues = self.color_accessibility.check_contrast_issues(current_colors)
src/ui/accessibility/color_accessibility.py:107: in check_contrast_issues
    if fg_key in colors and bg_key in colors:
E   TypeError: argument of type 'Mock' is not iterable
---------------------------- Captured stderr setup -----------------------------
2025-05-29 01:11:49 - INFO - Initialized ScreenReaderManager
2025-05-29 01:11:49 - INFO - Initialized KeyboardNavigationManager
2025-05-29 01:11:49 - INFO - Initialized ColorAccessibilityManager
2025-05-29 01:11:49 - INFO - Initialized DataSonification
2025-05-29 01:11:49 - INFO - Initialized AlternativeRepresentationManager
2025-05-29 01:11:49 - INFO - Initialized VisualizationAccessibilityManager
------------------------------ Captured log setup ------------------------------
INFO     apple_health_monitor.src.ui.accessibility.screen_reader_support:screen_reader_support.py:32 Initialized ScreenReaderManager
INFO     apple_health_monitor.src.ui.accessibility.keyboard_navigation:keyboard_navigation.py:59 Initialized KeyboardNavigationManager
INFO     apple_health_monitor.src.ui.accessibility.color_accessibility:color_accessibility.py:92 Initialized ColorAccessibilityManager
INFO     apple_health_monitor.src.ui.accessibility.alternative_representations:alternative_representations.py:216 Initialized DataSonification
INFO     apple_health_monitor.src.ui.accessibility.alternative_representations:alternative_representations.py:489 Initialized AlternativeRepresentationManager
INFO     apple_health_monitor.src.ui.accessibility.accessibility_manager:accessibility_manager.py:81 Initialized VisualizationAccessibilityManager
----------------------------- Captured stderr call -----------------------------
2025-05-29 01:11:49 - ERROR - Error ensuring color accessibility: argument of type 'Mock' is not iterable
2025-05-29 01:11:49 - ERROR - Error enhancing chart accessibility: argument of type 'Mock' is not iterable
2025-05-29 01:11:49 - ERROR - Error making chart accessible: argument of type 'Mock' is not iterable
------------------------------ Captured log call -------------------------------
ERROR    apple_health_monitor.src.ui.accessibility.accessibility_manager:accessibility_manager.py:227 Error ensuring color accessibility: argument of type 'Mock' is not iterable
ERROR    apple_health_monitor.src.ui.accessibility.accessibility_manager:accessibility_manager.py:156 Error enhancing chart accessibility: argument of type 'Mock' is not iterable
ERROR    apple_health_monitor.src.ui.accessibility.accessibility_manager:accessibility_manager.py:115 Error making chart accessible: argument of type 'Mock' is not iterable
=========================== short test summary info ============================
FAILED tests/unit/test_accessibility_compliance.py::TestVisualizationAccessibilityManager::test_make_chart_accessible
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!
========================= 1 failed, 1 passed in 12.41s =========================
